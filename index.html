<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" 
          content="width=device-width, 
                   initial-scale=1.0">
    <title>PASTI - PAncam Suggested Target Interface</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id = "container">
    <div id="threejs-container">
        <div id="threejs-canvas"></div>
        
      </div>

<div id="sidebar">
          <div class="container">
          <button name = 'login' style = 'width: 8vw'> Login</button>
          <button name = 'logout'style = 'width: 8vw' > Logout</button>
            </div>
          <div class="dropdown" id="solSelector">
          
            <select title = "SolSelect"id="solSelect"  style = 'height: 4vh'>
            <option value="NoSol">Select Sol</option>

            <option value="Sol1">Sol1</option>
            <option value="Sol2">Sol2</option>
            <option value="Sol3">Sol3</option>
            <option value="Sol4">Sol4</option>
            </select>
          </div><br />
          <div class="container">
          <button onclick="zoomIn()"style = 'width: 8vw'>Zoom In</button>
          <button onclick="zoomOut()"style = 'width: 8vw'>Zoom Out</button>
          </div>
          <button onclick="resetView()">Reset View</button><br />

          <button name = 'targetclear' onclick="clearMarkers()"> Clear Current Suggestions</button>
          <button name = 'targetsend'> Send & Confirm Suggestions</button><br />


          <a><button onclick = "jsonDownload()" id ="download"> Download Suggestions </button></a><br />
          <label for="download"  style = 'font-size: 2vh;'>Upload Suggestions</label>
          <input type="file" id="jsonFile" accept=".json" style = 'font-size: 2vh;' title="jsondown">
          <input type="button"  value="Submit" onclick = "jsonUpload()" style = 'font-size: 2vh;'>
        </form> 
          <br />
          <div>
            <input type="checkbox" onclick = "coordGrid()" id="scales" name="scales" />
            <label for="scales" style = 'font-size: 2vh;'>Coordinate Gridlines</label>
          </div>
            <div>
            <input type="checkbox" onclick = "markerShow()" id="markerShow" name="markerShow" checked/>
            <label for="markerShow" style = 'font-size: 2vh;'>Show Suggestions</label>
          </div>
        <br/><br/><br/><br/><br/>
        <p>Double Left Click: Place Marker <br/>Shift + Left Click: Draw Patch <br/>Right Click: Pan <br/>W: WAC FoV <br/>H: HRC FoV <br/>E: Enfys FoV</p>
        </div>

        </div>

      <div id="popupForm" style="display:none; font-size: 2vh; width: 35vw; height: 80vh;" class="popup">
        <form id="markerForm">
          <label>Suggestion Title: <input type="text" name="title" /></label><br />
          <label>Suggestion ID: <input type="text" name="suggestionID" disabled /></label><br />
          <label>User ID: <input type="text" name="userID" disabled /></label><br />
          <label>Suggestion Description:<br/><textarea name="description"></textarea></label><br />
          <label>Science Intent:<br/><textarea name="intent" ></textarea></label><br />

          <label>HRC:<input type="checkbox" name="HRC" /></label>
          <label>Enfys:<input type="checkbox" name="enfys" /></label><br />
          <label>WAC RGB:<input type="checkbox" name="wacRGB" /></label>
          <label>WAC Multispectral:<input type="checkbox" name="wacmulti" /></label><br />
          <label>Mosaic:<input type="checkbox" name="mosaic" /></label><br />

          <label>Keywords:<div class="dropdown" id="keywords">
            <select title = "Select Keywords"id="keywords"  style = 'height: 4vh'>
            <option value="nokw">Select Keywords</option>

            <option value="kw1">Keyword 1</option>
            <option value="kw2">Keyword 2</option>
            <option value="kw3">Keyword 3</option>
            </select>
          </div></label><br />
          <label><input type="text" name="selectedkeyywords" disabled /></label><br />

          <label>Other Notes:<br/><textarea name="notes"></textarea></label><br />

          <button type="submit">Save</button>
          <button type="button" onclick="closePopup()">Cancel</button>
        </form>
      </div>
      
      <div id="tooltip" style="display:none; position:absolute; background:white; border:1px solid black; padding:5px; pointer-events:none; z-index:100; overflow-wrap: break-word; max-width:30vw"></div>
      
<!-- Three.js core -->
<script src="https://unpkg.com/three@0.128.0/build/three.min.js"></script>
<!-- OrbitControls -->
<script src="https://unpkg.com/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

<!-- Graphical Setup Script-->
<script src="js_scripts/GraphicalSetup.js"></script>

<!-- Texture Loader Script-->
<script src="js_scripts/TextureLoad.js"></script>

<!-- Marker Placing Script-->
<script src="js_scripts/MarkerPlacement.js"></script>

<!-- PopupForm Script-->
<script src="js_scripts/PopupForms.js"></script>

<!-- Key Press Script-->
<script src="js_scripts/KeyPressFunctions.js"></script>

<!-- json Handler Script-->
<script src="js_scripts/jsonHandler.js"></script>

<!-- Miscelleanous Functions Script-->
<script src="js_scripts/MiscFunctions.js"></script>





<script>

const raycaster = new THREE.Raycaster();
const mouse = new THREE.Vector2();
const markers = [];
const meshes = [];
var w = innerWidth / 1.5, h = innerHeight / 1.5;
const rect = renderer.domElement.getBoundingClientRect();

function animate() {
    requestAnimationFrame(animate);
    controls.update();
    updateCameraRulers();
    renderer.render(scene, camera);
  }


  </script>

</body>
</html>